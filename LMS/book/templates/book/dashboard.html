{% extends "book/base.html" %}

{% block content %}
<div class="container mt-5">

  <!-- Books Table -->
  <h3 class="mb-3">üìö List of Books</h3>
  <table class="table table-bordered table-striped">
    <thead class="table-dark">
      <tr>
        <th>Sr. No.</th>
        <th>Title</th>
        <th>Author</th>
        <th>Availability</th>
      </tr>
    </thead>
    <tbody>
      {% for book in books %}
      <tr>
        <td>{{ forloop.counter }}</td>
        <td>{{ book.title }}</td>
        <td>{{ book.author }}</td>
        <td>
          {% if book.is_available %}
            <span class="badge bg-success">Available</span>
          {% else %}
            <span class="badge bg-danger">Borrowed</span>
          {% endif %}
        </td>
      </tr>
      {% empty %}
      <tr><td colspan="4" class="text-center">No books found.</td></tr>
      {% endfor %}
    </tbody>
  </table>

  <!-- Members Table -->
  <h3 class="mt-5 mb-3">üë§ List of Members</h3>
  <table class="table table-bordered table-striped">
    <thead class="table-dark">
      <tr>
        <th>Member ID</th>
        <th>Member Name</th>
        <th>Borrowed Books</th>
      </tr>
    </thead>
    <tbody>
      {% for member in members %}
      <tr>
        <td>{{ member.id }}</td>
        <td>{{ member.name }}</td>
        <td>{{ member.borrowed_books}}</td>
      </tr>
      {% empty %}
      <tr><td colspan="2" class="text-center">No members found.</td></tr>
      {% endfor %}
    </tbody>
  </table>

  <!-- Borrowed Books Table -->
  <h3 class="mt-5 mb-3">üìñ Borrowed Books</h3>
  <table class="table table-bordered table-striped">
    <thead class="table-dark">
      <tr>
        <th>Book</th>
        <th>Borrowed By</th>
        <th>Borrowed On</th>
        <th>Due Date</th>
      </tr>
    </thead>
    <tbody>
      {% for borrow in borrowed_books %}
      <tr>
        <td>{{ borrow.title }}</td>
        <td>{{ borrow.member.name }}</td>
        <td>{{ borrow.issue_date }}</td>
        <td>{{ borrow.due_date }}</td>
      </tr>
      {% empty %}
      <tr><td colspan="4" class="text-center">No borrowed books.</td></tr>
      {% endfor %}
    </tbody>
  </table>

  <!-- Overdue Books Table -->
  <h3 class="mt-5 mb-3 text-danger">‚è∞ Overdue Books</h3>
  <table class="table table-bordered table-striped">
    <thead class="table-danger">
      <tr>
        <th>Book</th>
        <th>Borrowed By</th>
        <th>Due Date</th>
      </tr>
    </thead>
    <tbody>
      {% for overdue in overdue_books %}
      <tr>
        <td>{{ overdue.title }}</td>
        <td>{{ overdue.member.name }}</td>
        <td>{{ overdue.due_date }}</td>
      </tr>
      {% empty %}
      <tr><td colspan="4" class="text-center">No overdue books.</td></tr>
      {% endfor %}
    </tbody>
  </table>

</div>
{% endblock %}